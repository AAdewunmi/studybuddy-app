<!-- path: src/main/resources/templates/signup.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sign up Â· StudyBuddy</title>

    <!-- Fonts & CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
        :root{
            --sb-primary: #2563eb;     /* blue */
            --sb-accent:  #22c55e;     /* green */
            --sb-ink:     #0f172a;     /* slate-900 */
            --sb-muted:   #64748b;     /* slate-500 */
            --sb-fb:      #1877F2;     /* Facebook */
            --sb-google:  #0F9D58;     /* Google (one of brand greens) */
        }
        html, body { height: 100%; font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";}
        body {
            background:
                    radial-gradient(1200px 600px at 10% -10%, rgba(34,197,94,.10), transparent 60%),
                    radial-gradient(1200px 600px at 110% 10%, rgba(37,99,235,.10), transparent 60%),
                    #f8fafc;
            color: var(--sb-ink);
        }

        /* Navbar */
        .sb-navbar{
            backdrop-filter: saturate(180%) blur(6px);
            background-color: rgba(255,255,255,.9) !important;
        }
        .sb-brand{
            display:flex; align-items:center; gap:.5rem; font-weight:700; letter-spacing:.2px;
            color: var(--sb-ink); text-decoration:none;
        }
        .sb-brand svg{ width:28px; height:28px }
        .nav-link{ color: var(--sb-ink); }
        .nav-link:hover{ color: var(--sb-primary); }

        /* Card / form */
        .sb-card{
            border: 1px solid #e5e7eb;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(2,6,23,.06);
        }
        .sb-form .form-control{
            border-radius: .75rem;
            padding: .75rem .95rem;
            border: 1px solid #e5e7eb;
            transition: box-shadow .2s ease, border-color .2s ease, transform .08s ease;
        }
        .sb-form .form-control:focus{
            border-color: var(--sb-primary);
            box-shadow: 0 0 0 .2rem rgba(37,99,235,.15);
        }

        .btn-sb{
            border-radius: .75rem;
            padding: .75rem 1rem;
            font-weight: 600;
            transition: transform .06s ease, box-shadow .2s ease, background-color .2s ease, opacity .2s ease;
        }
        .btn-sb:active{ transform: translateY(1px); }
        .btn-primary{ background-color: var(--sb-primary); border-color: var(--sb-primary); }
        .btn-primary:hover{ box-shadow: 0 8px 20px rgba(37,99,235,.25); }

        .btn-google{ border-color: #e5e7eb; }
        .btn-google:hover{ background: rgba(15,157,88,.06); }
        .btn-facebook{ background: var(--sb-fb); border-color: var(--sb-fb); }
        .btn-facebook:hover{ box-shadow: 0 8px 20px rgba(24,119,242,.25); }

        .sb-divider{
            display:flex; align-items:center; gap:.75rem; color: var(--sb-muted); font-size:.9rem;
            margin: 1.25rem 0;
        }
        .sb-divider::before, .sb-divider::after{
            content:""; height:1px; flex:1; background: #e5e7eb;
        }

        .sb-footer-text{ color: var(--sb-muted); font-size:.95rem; }
        .form-text{ color: var(--sb-muted) !important; }
    </style>
</head>
<body>

<!-- Sticky Navigation -->
<nav class="navbar navbar-expand-lg sb-navbar sticky-top border-bottom">
    <div class="container">
        <a th:href="@{/}" class="sb-brand">
            <!-- Simple book logo -->
            <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                <path d="M4 6.5A2.5 2.5 0 0 1 6.5 4H20v14.5a1.5 1.5 0 0 1-1.5 1.5H6.5A2.5 2.5 0 0 1 4 17V6.5Z" stroke="currentColor" stroke-width="1.5"/>
                <path d="M4 7h14.5A1.5 1.5 0 0 1 20 8.5V20" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            StudyBuddy
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav"
                aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div id="mainNav" class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto align-items-lg-center">
                <li class="nav-item"><a class="nav-link" th:href="@{/}">Home</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/about}">About</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/services}">Services</a></li>
                <li class="nav-item"><a class="nav-link" th:href="@{/contact}">Contact</a></li>
                <li class="nav-item ms-lg-3">
                    <a th:href="@{/login}" class="btn btn-outline-secondary btn-sb">Log in</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!-- Content -->
<main class="container py-5">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-8 col-xl-6">
            <div class="card sb-card">
                <div class="card-body p-4 p-md-5">

                    <header class="mb-4">
                        <h1 class="h3 mb-2">Create your account</h1>
                        <p class="sb-footer-text mb-0">Join StudyBuddy to track habits and learn with friends.</p>
                    </header>

                    <!-- Signup Form -->
                    <form class="sb-form" th:action="@{/signup}" th:object="${signupForm}" method="post" novalidate>
                        <!-- Global (object-level) errors -->
                        <div class="alert alert-danger" th:if="${#fields.hasGlobalErrors()}">
                            <ul class="mb-0">
                                <li th:each="e : ${#fields.globalErrors()}" th:text="${e}"></li>
                            </ul>
                        </div>

                        <!-- CSRF (guard with null-check to avoid template errors in tests) -->
                        <input type="hidden" th:if="${_csrf != null}"
                               th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                        <!-- Full Name -->
                        <div class="mb-3">
                            <label class="form-label" for="name">Full Name</label>
                            <input id="name" type="text" th:field="*{name}" class="form-control" required>
                            <div class="text-danger" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">name error</div>
                        </div>

                        <!-- Email -->
                        <div class="mb-3">
                            <label class="form-label" for="email">Email Address</label>
                            <input id="email" type="email" th:field="*{email}" class="form-control"
                                   placeholder="you@example.com" required autocomplete="email" />
                            <div class="text-danger small" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">email error</div>
                        </div>

                        <!-- Password -->
                        <div class="mb-3">
                            <label class="form-label" for="password">Password</label>
                            <input id="password" type="password" th:field="*{password}" class="form-control"
                                   placeholder="At least 8 characters" required minlength="8" autocomplete="new-password" />
                            <div class="form-text">Use 8+ characters with a mix of letters, numbers & symbols.</div>
                            <div class="text-danger small" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">password error</div>
                        </div>

                        <!-- Confirm Password -->
                        <div class="mb-3">
                            <label class="form-label" for="passwordConfirm">Confirm Password</label>
                            <input id="passwordConfirm" type="password" th:field="*{passwordConfirm}" class="form-control"
                                   placeholder="Re-enter your password" required minlength="8" autocomplete="new-password" />
                            <div class="text-danger small" th:if="${#fields.hasErrors('passwordConfirm')}" th:errors="*{passwordConfirm}">confirm error</div>
                        </div>

                        <!-- Terms & Conditions -->
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="terms" required />
                            <label class="form-check-label" for="terms">
                                I agree to the <a th:href="@{/terms}" class="text-decoration-underline">Terms & Conditions</a>.
                            </label>
                        </div>

                        <!-- Primary CTA -->
                        <button type="submit" class="btn btn-primary btn-sb w-100">Sign Up</button>

                        <!-- Or divider -->
                        <div class="sb-divider"><span>or</span></div>

                        <!-- Social signups (visual only unless OAuth is configured) -->
                        <div class="row g-2">
                            <div class="col-12 col-md-6">
                                <a class="btn btn-light btn-sb w-100 btn-google"
                                   role="button"
                                   th:href="@{/oauth2/authorization/google}"
                                   aria-label="Sign up with Google">
                                    <!-- Simple G icon -->
                                    <svg class="me-2" width="18" height="18" viewBox="0 0 48 48" aria-hidden="true">
                                        <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 S17.373,12,24,12c3.059,0,5.842,1.156,7.961,3.039l5.657-5.657C34.676,6.053,29.566,4,24,4C12.955,4,4,12.955,4,24 s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                                        <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,16.108,18.961,12,24,12c3.059,0,5.842,1.156,7.961,3.039 l5.657-5.657C34.676,6.053,29.566,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                                        <path fill="#4CAF50" d="M24,44c5.168,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.022,26.715,36,24,36 c-5.188,0-9.594-3.317-11.253-7.946l-6.53,5.032C9.529,39.556,16.227,44,24,44z"/>
                                        <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.793,2.238-2.279,4.166-4.194,5.57 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.961,38.981,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
                                    </svg>
                                    Sign up with Google
                                </a>
                            </div>
                            <div class="col-12 col-md-6">
                                <a class="btn btn-facebook btn-sb w-100"
                                   role="button"
                                   th:href="@{/oauth2/authorization/facebook}"
                                   aria-label="Sign up with Facebook">
                                    <!-- Simple F icon -->
                                    <svg class="me-2" width="16" height="16" viewBox="0 0 24 24" fill="white" aria-hidden="true">
                                        <path d="M22 12.06C22 6.505 17.523 2 12 2S2 6.505 2 12.06C2 17.08 5.657 21.214 10.438 22v-7.02H7.898V12.06h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.196 2.238.196v2.47h-1.26c-1.24 0-1.628.77-1.628 1.562v1.924h2.773l-.443 2.92H13.57V22C18.343 21.214 22 17.08 22 12.06z"/>
                                    </svg>
                                    Sign up with Facebook
                                </a>
                            </div>
                        </div>

                        <!-- Already have an account -->
                        <p class="sb-footer-text mt-4 mb-0">
                            Already have an account?
                            <a th:href="@{/login}" class="text-decoration-underline">Log in</a>.
                        </p>
                    </form>

                </div>
            </div>
        </div>
    </div>
</main>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

